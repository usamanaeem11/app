# ============================================================
# Docker Compose Override Configuration (Development)
# This file is used for local development and testing
# It overrides settings from docker-compose.yml
# ============================================================

# Note: This file is automatically loaded by docker-compose
# and overrides settings from docker-compose.yml

version: '3.9'

services:
  postgres:
    # Expose postgres for local debugging
    ports:
      - "5433:5432"
    environment:
      # Enable more verbose logging in development
      POSTGRES_INITDB_ARGS: "--encoding=UTF8 --locale=C -c log_statement=all"

  minio:
    # Expose MinIO for local testing
    ports:
      - "9002:9000"
      - "9002:9001"

  backend:
    # Mount local code for development
    volumes:
      - ./backend:/app:cached
    environment:
      DEBUG: "true"
      LOG_LEVEL: debug
    ports:
      - "8001:8000"
    # Enable auto-reload on code changes
    command: >
      uvicorn server:app
      --host 0.0.0.0
      --port 8000
      --reload
      --reload-dirs=/app

  frontend:
    volumes:
      - ./frontend:/app/frontend:cached
    environment:
      REACT_APP_ENVIRONMENT: development
      DEBUG: "true"
    ports:
      - "3001:3000"

  nginx:
    # In development, use simple HTTP
    ports:
      - "8080:80"
